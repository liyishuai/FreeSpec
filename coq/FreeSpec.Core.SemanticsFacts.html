<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>FreeSpec.Core.SemanticsFacts</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library FreeSpec.Core.SemanticsFacts</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">ExtLib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">StateMonad</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">FreeSpec.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="FreeSpec.Core.ImpureFacts.html#"><span class="id" title="library">ImpureFacts</span></a> <a class="idref" href="FreeSpec.Core.Contract.html#"><span class="id" title="library">Contract</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">FreeSpec.Core</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="FreeSpec.Core.Semantics.html#"><span class="id" title="library">Semantics</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab25"></a><h1 class="section">Semantics Compliance</h1>

<div class="paragraph"> </div>

 Given a semantics <span class="inlinecode"><span class="id" title="var">sem</span></span>, and a witness <span class="inlinecode">ω</span> if <span class="inlinecode"><span class="id" title="var">sem</span></span> computes results which
    satisfies <span class="inlinecode"><span class="id" title="var">c</span></span> callee obligations for effects which satisfy <span class="inlinecode"><span class="id" title="var">c</span></span> caller
    obligations and if the resulting semantics produces after interpreting <span class="inlinecode"><span class="id" title="var">e</span></span>
    complies to <span class="inlinecode"><span class="id" title="var">c</span></span> in accordance to <span class="inlinecode">ω'</span>, where <span class="inlinecode">ω'</span> is the new witness state
    after <span class="inlinecode"><span class="id" title="var">e</span></span> interpretation then <span class="inlinecode"><span class="id" title="var">sem</span></span> complies to <span class="inlinecode"><span class="id" title="var">c</span></span> in accordance to <span class="inlinecode">ω</span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">CoInductive</span> <a id="compliant_semantics" class="idref" href="#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> `{<a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">MayProvide</span></a> <a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">ix</span></a> <a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">i</span></a>} `(<a id="c:5" class="idref" href="#c:5"><span class="id" title="binder">c</span></a> : <a class="idref" href="FreeSpec.Core.Contract.html#contract"><span class="id" title="record">contract</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:2"><span class="id" title="variable">i</span></a> <a id="d3ff669e2403880e05633ecb2b018b1c" class="idref" href="#d3ff669e2403880e05633ecb2b018b1c"><span class="id" title="binder">Ω</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">Ω</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <span class="id" title="var">ix</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="compliant_semantics_rec" class="idref" href="#compliant_semantics_rec"><span class="id" title="constructor">compliant_semantics_rec</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sem:8" class="idref" href="#sem:8"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#ix:1"><span class="id" title="variable">ix</span></a>) (<a id="0ca13ed3bfdd4371c3b7e497b552fc2f" class="idref" href="#0ca13ed3bfdd4371c3b7e497b552fc2f"><span class="id" title="binder">ω</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#d3ff669e2403880e05633ecb2b018b1c"><span class="id" title="variable">Ω</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="o_callee:12" class="idref" href="#o_callee:12"><span class="id" title="binder">o_callee</span></a> : <span class="id" title="keyword">∀</span> {<a id="01214f440e1ebbf02585b4d6c7d6f861" class="idref" href="#01214f440e1ebbf02585b4d6c7d6f861"><span class="id" title="binder">α</span></a>} (<a id="e:11" class="idref" href="#e:11"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#ix:1"><span class="id" title="variable">ix</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#01214f440e1ebbf02585b4d6c7d6f861"><span class="id" title="variable">α</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Core.Contract.html#gen_caller_obligation"><span class="id" title="definition">gen_caller_obligation</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:5"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#0ca13ed3bfdd4371c3b7e497b552fc2f"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:11"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.Contract.html#gen_callee_obligation"><span class="id" title="definition">gen_callee_obligation</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:5"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#0ca13ed3bfdd4371c3b7e497b552fc2f"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:11"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:8"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:11"><span class="id" title="variable">e</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="next:15" class="idref" href="#next:15"><span class="id" title="binder">next</span></a> : <span class="id" title="keyword">∀</span> {<a id="735d886dab4ed68ebb289e88433f8410" class="idref" href="#735d886dab4ed68ebb289e88433f8410"><span class="id" title="binder">α</span></a>} (<a id="e:14" class="idref" href="#e:14"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#ix:1"><span class="id" title="variable">ix</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#735d886dab4ed68ebb289e88433f8410"><span class="id" title="variable">α</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Core.Contract.html#gen_caller_obligation"><span class="id" title="definition">gen_caller_obligation</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:5"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#0ca13ed3bfdd4371c3b7e497b552fc2f"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:14"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#compliant_semantics:6"><span class="id" title="inductive">compliant_semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:5"><span class="id" title="variable">c</span></a> (<a class="idref" href="FreeSpec.Core.Contract.html#gen_witness_update"><span class="id" title="definition">gen_witness_update</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:5"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#0ca13ed3bfdd4371c3b7e497b552fc2f"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:14"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:8"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:14"><span class="id" title="variable">e</span></a>)) (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:8"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:14"><span class="id" title="variable">e</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#compliant_semantics:6"><span class="id" title="inductive">compliant_semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:5"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#0ca13ed3bfdd4371c3b7e497b552fc2f"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:8"><span class="id" title="variable">sem</span></a>.<br/>

<br/>
</div>

<div class="doc">
Proving that semantics obtained from the <span class="inlinecode"><a class="idref" href="FreeSpec.Core.Semantics.html#store"><span class="id" title="definition">store</span></a></span> function are compliant with
    <span class="inlinecode"><a class="idref" href="FreeSpec.Core.Contract.html#store_specs"><span class="id" title="definition">store_specs</span></a></span> is relatively simple. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="store_complies_to_store_specs" class="idref" href="#store_complies_to_store_specs"><span class="id" title="lemma">store_complies_to_store_specs</span></a> {<a id="s:16" class="idref" href="#s:16"><span class="id" title="binder">s</span></a>} (<a id="st:17" class="idref" href="#st:17"><span class="id" title="binder">st</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#s:16"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> (<a class="idref" href="FreeSpec.Core.Contract.html#store_specs"><span class="id" title="definition">store_specs</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#s:16"><span class="id" title="variable">s</span></a>) <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#st:17"><span class="id" title="variable">st</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#store"><span class="id" title="definition">store</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#st:17"><span class="id" title="variable">st</span></a>).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">st</span>; <span class="id" title="keyword">cofix</span> <span class="id" title="var">compliant_semantics_rec</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> [| <span class="id" title="var">st'</span>] <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">e</span> <span class="id" title="var">req</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#store"><span class="id" title="definition">store</span></a> <span class="id" title="var">st</span>) <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="FreeSpec.Core.Semantics.html#store"><span class="id" title="definition">store</span></a> (<a class="idref" href="FreeSpec.Core.Contract.html#store_update"><span class="id" title="definition">store_update</span></a> <span class="id" title="var">s</span> <span class="id" title="var">st</span> <span class="id" title="var">a</span> <span class="id" title="var">e</span> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#store"><span class="id" title="definition">store</span></a> <span class="id" title="var">st</span>) <span class="id" title="var">e</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">st'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">compliant_semantics_rec</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">store_complies_to_store_specs</span> : <span class="id" title="var">freespec</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="compliant_semantics_caller_obligation_callee_obligation" class="idref" href="#compliant_semantics_caller_obligation_callee_obligation"><span class="id" title="lemma">compliant_semantics_caller_obligation_callee_obligation</span></a> `{<a id="H:20" class="idref" href="#H:20"><span class="id" title="binder">MayProvide</span></a> <a id="H:20" class="idref" href="#H:20"><span class="id" title="binder">ix</span></a> <a id="H:20" class="idref" href="#H:20"><span class="id" title="binder">i</span></a>}<br/>
&nbsp;&nbsp;&nbsp;`(<a id="c:22" class="idref" href="#c:22"><span class="id" title="binder">c</span></a> : <a class="idref" href="FreeSpec.Core.Contract.html#contract"><span class="id" title="record">contract</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:19"><span class="id" title="variable">i</span></a> <a id="ad6f9e51c21de0acb2bfa8c6199da887" class="idref" href="#ad6f9e51c21de0acb2bfa8c6199da887"><span class="id" title="binder">Ω</span></a>) (<a id="27ea2e306dca91eb24c635aebb1a5be1" class="idref" href="#27ea2e306dca91eb24c635aebb1a5be1"><span class="id" title="binder">ω</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#ad6f9e51c21de0acb2bfa8c6199da887"><span class="id" title="variable">Ω</span></a>)<br/>
&nbsp;&nbsp;&nbsp;`(<a id="e:25" class="idref" href="#e:25"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#ix:18"><span class="id" title="variable">ix</span></a> <a id="6d9fcab9e11df7a3b367a2a0813c6da7" class="idref" href="#6d9fcab9e11df7a3b367a2a0813c6da7"><span class="id" title="binder">α</span></a>) (<a id="o_caller:26" class="idref" href="#o_caller:26"><span class="id" title="binder">o_caller</span></a> : <a class="idref" href="FreeSpec.Core.Contract.html#gen_caller_obligation"><span class="id" title="definition">gen_caller_obligation</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:22"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#27ea2e306dca91eb24c635aebb1a5be1"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:25"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sem:27" class="idref" href="#sem:27"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#ix:18"><span class="id" title="variable">ix</span></a>) (<a id="comp:28" class="idref" href="#comp:28"><span class="id" title="binder">comp</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:22"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#27ea2e306dca91eb24c635aebb1a5be1"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:27"><span class="id" title="variable">sem</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Contract.html#gen_callee_obligation"><span class="id" title="definition">gen_callee_obligation</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:22"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#27ea2e306dca91eb24c635aebb1a5be1"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:25"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:27"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:25"><span class="id" title="variable">e</span></a>).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">comp</span>; <span class="id" title="var">ssubst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">o_callee</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">compliant_semantics_caller_obligation_callee_obligation</span> : <span class="id" title="var">freespec</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="compliant_semantics_caller_obligation_compliant" class="idref" href="#compliant_semantics_caller_obligation_compliant"><span class="id" title="lemma">compliant_semantics_caller_obligation_compliant</span></a> `{<a id="H:31" class="idref" href="#H:31"><span class="id" title="binder">MayProvide</span></a> <a id="H:31" class="idref" href="#H:31"><span class="id" title="binder">ix</span></a> <a id="H:31" class="idref" href="#H:31"><span class="id" title="binder">i</span></a>} {<a id="eaecbb7d35edf64ab4e733a0c6749f3e" class="idref" href="#eaecbb7d35edf64ab4e733a0c6749f3e"><span class="id" title="binder">Ω</span></a> <a id="b0d0298a1c29a92de99c7ffcfa1c1a2f" class="idref" href="#b0d0298a1c29a92de99c7ffcfa1c1a2f"><span class="id" title="binder">α</span></a>} (<a id="c:34" class="idref" href="#c:34"><span class="id" title="binder">c</span></a> : <a class="idref" href="FreeSpec.Core.Contract.html#contract"><span class="id" title="record">contract</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:30"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#eaecbb7d35edf64ab4e733a0c6749f3e"><span class="id" title="variable">Ω</span></a>) (<a id="70c126716260d2a59e31d8545dfceafc" class="idref" href="#70c126716260d2a59e31d8545dfceafc"><span class="id" title="binder">ω</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#eaecbb7d35edf64ab4e733a0c6749f3e"><span class="id" title="variable">Ω</span></a>)<br/>
&nbsp;&nbsp;(<a id="e:36" class="idref" href="#e:36"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#ix:29"><span class="id" title="variable">ix</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#b0d0298a1c29a92de99c7ffcfa1c1a2f"><span class="id" title="variable">α</span></a>) (<a id="o_caller:37" class="idref" href="#o_caller:37"><span class="id" title="binder">o_caller</span></a> : <a class="idref" href="FreeSpec.Core.Contract.html#gen_caller_obligation"><span class="id" title="definition">gen_caller_obligation</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:34"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#70c126716260d2a59e31d8545dfceafc"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:36"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;(<a id="sem:38" class="idref" href="#sem:38"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#ix:29"><span class="id" title="variable">ix</span></a>) (<a id="comp:39" class="idref" href="#comp:39"><span class="id" title="binder">comp</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:34"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#70c126716260d2a59e31d8545dfceafc"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:38"><span class="id" title="variable">sem</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:34"><span class="id" title="variable">c</span></a> (<a class="idref" href="FreeSpec.Core.Contract.html#gen_witness_update"><span class="id" title="definition">gen_witness_update</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:34"><span class="id" title="variable">c</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#70c126716260d2a59e31d8545dfceafc"><span class="id" title="variable">ω</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:36"><span class="id" title="variable">e</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:38"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:36"><span class="id" title="variable">e</span></a>)) (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:38"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:36"><span class="id" title="variable">e</span></a>).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">comp</span>; <span class="id" title="var">ssubst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">next</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">compliant_semantics_caller_obligation_compliant</span> : <span class="id" title="var">freespec</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="no_contract_compliant_semantics" class="idref" href="#no_contract_compliant_semantics"><span class="id" title="lemma">no_contract_compliant_semantics</span></a> `{<a id="H:42" class="idref" href="#H:42"><span class="id" title="binder">MayProvide</span></a> <a id="H:42" class="idref" href="#H:42"><span class="id" title="binder">ix</span></a> <a id="H:42" class="idref" href="#H:42"><span class="id" title="binder">i</span></a>} (<a id="sem:43" class="idref" href="#sem:43"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#ix:40"><span class="id" title="variable">ix</span></a>) (<a id="u:44" class="idref" href="#u:44"><span class="id" title="binder">u</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> (<a class="idref" href="FreeSpec.Core.Contract.html#no_contract"><span class="id" title="definition">no_contract</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:41"><span class="id" title="variable">i</span></a>) <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#u:44"><span class="id" title="variable">u</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:43"><span class="id" title="variable">sem</span></a>.<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">sem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">no_contract_compliant_semantics</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span> <span class="id" title="var">req</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Contract.html#gen_caller_obligation"><span class="id" title="definition">gen_caller_obligation</span></a>, <a class="idref" href="FreeSpec.Core.Contract.html#gen_callee_obligation"><span class="id" title="definition">gen_callee_obligation</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="FreeSpec.Core.Interface.html#proj_p"><span class="id" title="method">proj_p</span></a>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span> <span class="id" title="var">req</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Contract.html#gen_witness_update"><span class="id" title="definition">gen_witness_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="FreeSpec.Core.Interface.html#proj_p"><span class="id" title="method">proj_p</span></a> <span class="id" title="var">e</span>); [ <span class="id" title="tactic">apply</span> <span class="id" title="var">no_contract_compliant_semantics</span> | <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">freespec</span> ].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">no_contract_compliant_semantics</span> : <span class="id" title="var">freespec</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab26"></a><h1 class="section">Equivalences</h1>

<div class="paragraph"> </div>

<a id="lab27"></a><h2 class="section">Semantics</h2>

<div class="paragraph"> </div>

 We say two semantics are equivalent when they produce equivalent outputs
    given the same primitive. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">CoInductive</span> <a id="semantics_eq" class="idref" href="#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> {<a id="i:45" class="idref" href="#i:45"><span class="id" title="binder">i</span></a>} : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="semantics_eq_rec" class="idref" href="#semantics_eq_rec"><span class="id" title="constructor">semantics_eq_rec</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sem:48" class="idref" href="#sem:48"><span class="id" title="binder">sem</span></a> <a id="sem':49" class="idref" href="#sem':49"><span class="id" title="binder">sem'</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:45"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="res_eq:52" class="idref" href="#res_eq:52"><span class="id" title="binder">res_eq</span></a> : <span class="id" title="keyword">∀</span> {<a id="a:50" class="idref" href="#a:50"><span class="id" title="binder">a</span></a>} (<a id="e:51" class="idref" href="#e:51"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:45"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:50"><span class="id" title="variable">a</span></a>), <a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:48"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:51"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem':49"><span class="id" title="variable">sem'</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:51"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="next_eq:55" class="idref" href="#next_eq:55"><span class="id" title="binder">next_eq</span></a> : <span class="id" title="keyword">∀</span> {<a id="a:53" class="idref" href="#a:53"><span class="id" title="binder">a</span></a>} (<a id="e:54" class="idref" href="#e:54"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:45"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:53"><span class="id" title="variable">a</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq:46"><span class="id" title="inductive">semantics_eq</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:48"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:54"><span class="id" title="variable">e</span></a>) (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem':49"><span class="id" title="variable">sem'</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:54"><span class="id" title="variable">e</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq:46"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:48"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem':49"><span class="id" title="variable">sem'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a id="b41064feeabe5d8117229a04643e5301" class="idref" href="#b41064feeabe5d8117229a04643e5301"><span class="id" title="notation">&quot;</span></a>===" := <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> : <span class="id" title="var">semantics_scope</span>.<br/>

<br/>
</div>

<div class="doc">
We prove <span class="inlinecode"><a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a></span> is indeed an equivalence. 
</div>
<div class="code">

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="semantics_Equivalence" class="idref" href="#semantics_Equivalence"><span class="id" title="instance">semantics_Equivalence</span></a> (<a id="i:56" class="idref" href="#i:56"><span class="id" title="binder">i</span></a> : <a class="idref" href="FreeSpec.Core.Interface.html#interface"><span class="id" title="definition">interface</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.RelationClasses.html#Equivalence"><span class="id" title="class">Equivalence</span></a> (@<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:56"><span class="id" title="variable">i</span></a>).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">semantics_eq_refl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">semantics_eq_refl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">semantics_eq_sym</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">equiv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">step</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">semantics_eq_sym</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">semantics_eq_trans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">sem''</span> <span class="id" title="var">equiv</span> <span class="id" title="var">equiv'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">equiv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">equiv'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sem'</span> <span class="id" title="var">sem''</span> <span class="id" title="var">equ'</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">equ</span> <span class="id" title="keyword">with</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">equ'</span> <span class="id" title="keyword">with</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">equ</span>; <span class="id" title="var">ssubst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">equ'</span>; <span class="id" title="var">ssubst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">transitivity</span> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <span class="id" title="var">sem'</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">semantics_eq_trans</span>; [ <span class="id" title="tactic">apply</span> <span class="id" title="var">next_eq</span> | <span class="id" title="tactic">apply</span> <span class="id" title="var">next_eq0</span> ].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab28"></a><h2 class="section">Interpretation Results</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="run_effect_eq" class="idref" href="#run_effect_eq"><span class="id" title="definition">run_effect_eq</span></a> `(<a id="x:59" class="idref" href="#x:59"><span class="id" title="binder">x</span></a> : <a id="cb56bbc9bd2a9a795741a0fbb16a1e54" class="idref" href="#cb56bbc9bd2a9a795741a0fbb16a1e54"><span class="id" title="binder">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a id="i:58" class="idref" href="#i:58"><span class="id" title="binder">i</span></a>) (<a id="y:60" class="idref" href="#y:60"><span class="id" title="binder">y</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#cb56bbc9bd2a9a795741a0fbb16a1e54"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:58"><span class="id" title="variable">i</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#x:59"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#y:60"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#x:59"><span class="id" title="variable">x</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#b41064feeabe5d8117229a04643e5301"><span class="id" title="notation">===</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#y:60"><span class="id" title="variable">y</span></a>)%<span class="id" title="var">semantics</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="run_effect_Equivalence" class="idref" href="#run_effect_Equivalence"><span class="id" title="instance">run_effect_Equivalence</span></a> : @<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.RelationClasses.html#Equivalence"><span class="id" title="class">Equivalence</span></a> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <span class="id" title="var">i</span>) <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_effect_eq"><span class="id" title="definition">run_effect_eq</span></a>.<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">next</span>]; <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">next</span>] [<span class="id" title="var">y</span> <span class="id" title="var">next'</span>] [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]; <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">next</span>] [<span class="id" title="var">y</span> <span class="id" title="var">next'</span>] [<span class="id" title="var">z</span> <span class="id" title="var">next_</span>] [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>] [<span class="id" title="var">H3</span> <span class="id" title="var">H4</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">etransitivity</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab29"></a><h2 class="section">Proper Instances</h2>

</div>
<div class="code">

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="fst_Proper" class="idref" href="#fst_Proper"><span class="id" title="instance">fst_Proper</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_effect_eq"><span class="id" title="definition">run_effect_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">α</span> (<a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <span class="id" title="var">i</span>)).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">next</span>] [<span class="id" title="var">y</span> <span class="id" title="var">next'</span>] [<span class="id" title="var">equ1</span> <span class="id" title="var">equ2</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equ1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="snd_Proper" class="idref" href="#snd_Proper"><span class="id" title="instance">snd_Proper</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_effect_eq"><span class="id" title="definition">run_effect_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a>) (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">α</span> (<a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <span class="id" title="var">i</span>)).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">next</span>] [<span class="id" title="var">y</span> <span class="id" title="var">next'</span>] [<span class="id" title="var">equ1</span> <span class="id" title="var">equ2</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equ2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="prod_Proper" class="idref" href="#prod_Proper"><span class="id" title="instance">prod_Proper</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_effect_eq"><span class="id" title="definition">run_effect_eq</span></a>) (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <span class="id" title="var">a</span> (<a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <span class="id" title="var">i</span>)).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">equ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="run_effect_Proper" class="idref" href="#run_effect_Proper"><span class="id" title="instance">run_effect_Proper</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_effect_eq"><span class="id" title="definition">run_effect_eq</span></a>) (@<a class="idref" href="FreeSpec.Core.Semantics.html#run_effect"><span class="id" title="definition">run_effect</span></a> <span class="id" title="var">i</span> <span class="id" title="var">α</span>).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equ</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.Semantics.html#run_effect_equation"><span class="id" title="lemma">run_effect_equation</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">equ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">res_eq</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">next_eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eval_effect_Proper" class="idref" href="#eval_effect_Proper"><span class="id" title="instance">eval_effect_Proper</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (@<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <span class="id" title="var">i</span> <span class="id" title="var">α</span>).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">o</span> <span class="id" title="var">o'</span> <span class="id" title="var">equ</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">equ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="exec_effect_Proper" class="idref" href="#exec_effect_Proper"><span class="id" title="instance">exec_effect_Proper</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a>) (@<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <span class="id" title="var">i</span> <span class="id" title="var">α</span>).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">o</span> <span class="id" title="var">o'</span> <span class="id" title="var">equ</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">equ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>]<br/>
<span class="id" title="keyword">Remark</span> <a id="eval_semprod_in_left_eq" class="idref" href="#eval_semprod_in_left_eq"><span class="id" title="lemma">eval_semprod_in_left_eq</span></a> `(<a id="semi:76" class="idref" href="#semi:76"><span class="id" title="binder">semi</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a id="i:75" class="idref" href="#i:75"><span class="id" title="binder">i</span></a>) `(<a id="semj:78" class="idref" href="#semj:78"><span class="id" title="binder">semj</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a id="j:77" class="idref" href="#j:77"><span class="id" title="binder">j</span></a>) `(<a id="e:80" class="idref" href="#e:80"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:75"><span class="id" title="variable">i</span></a> <a id="754c17b4c2b5960f5294537f23067ffc" class="idref" href="#754c17b4c2b5960f5294537f23067ffc"><span class="id" title="binder">α</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semi:76"><span class="id" title="variable">semi</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#3b9461100b009f960cb7e7d18a94f57b"><span class="id" title="notation">×</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semj:78"><span class="id" title="variable">semj</span></a>) (<a class="idref" href="FreeSpec.Core.Interface.html#in_left"><span class="id" title="constructor">in_left</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:80"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semi:76"><span class="id" title="variable">semi</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:80"><span class="id" title="variable">e</span></a>.<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">semi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">semi</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">semi</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>]<br/>
<span class="id" title="keyword">Remark</span> <a id="eval_semprod_in_right_eq" class="idref" href="#eval_semprod_in_right_eq"><span class="id" title="lemma">eval_semprod_in_right_eq</span></a> `(<a id="semi:82" class="idref" href="#semi:82"><span class="id" title="binder">semi</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a id="i:81" class="idref" href="#i:81"><span class="id" title="binder">i</span></a>) `(<a id="semj:84" class="idref" href="#semj:84"><span class="id" title="binder">semj</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a id="j:83" class="idref" href="#j:83"><span class="id" title="binder">j</span></a>) `(<a id="e:86" class="idref" href="#e:86"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#j:83"><span class="id" title="variable">j</span></a> <a id="88f363a3d58dfc75e8ca35b781cf14f7" class="idref" href="#88f363a3d58dfc75e8ca35b781cf14f7"><span class="id" title="binder">α</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semi:82"><span class="id" title="variable">semi</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#3b9461100b009f960cb7e7d18a94f57b"><span class="id" title="notation">×</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semj:84"><span class="id" title="variable">semj</span></a>) (<a class="idref" href="FreeSpec.Core.Interface.html#in_right"><span class="id" title="constructor">in_right</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:86"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semj:84"><span class="id" title="variable">semj</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:86"><span class="id" title="variable">e</span></a>.<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">semj</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">semj</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">semj</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>]<br/>
<span class="id" title="keyword">Remark</span> <a id="exec_semprod_in_left_eq" class="idref" href="#exec_semprod_in_left_eq"><span class="id" title="lemma">exec_semprod_in_left_eq</span></a> `(<a id="semi:88" class="idref" href="#semi:88"><span class="id" title="binder">semi</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a id="i:87" class="idref" href="#i:87"><span class="id" title="binder">i</span></a>) `(<a id="semj:90" class="idref" href="#semj:90"><span class="id" title="binder">semj</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a id="j:89" class="idref" href="#j:89"><span class="id" title="binder">j</span></a>) `(<a id="e:92" class="idref" href="#e:92"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:87"><span class="id" title="variable">i</span></a> <a id="c9e25ba58cf818b94fcda6535da0e0d1" class="idref" href="#c9e25ba58cf818b94fcda6535da0e0d1"><span class="id" title="binder">α</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semi:88"><span class="id" title="variable">semi</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#3b9461100b009f960cb7e7d18a94f57b"><span class="id" title="notation">×</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semj:90"><span class="id" title="variable">semj</span></a>) (<a class="idref" href="FreeSpec.Core.Interface.html#in_left"><span class="id" title="constructor">in_left</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:92"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="FreeSpec.Core.Semantics.html#semprod"><span class="id" title="definition">semprod</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semi:88"><span class="id" title="variable">semi</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:92"><span class="id" title="variable">e</span></a>) <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semj:90"><span class="id" title="variable">semj</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">semi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">semi</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">semi</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>]<br/>
<span class="id" title="keyword">Remark</span> <a id="exec_semprod_in_right_eq" class="idref" href="#exec_semprod_in_right_eq"><span class="id" title="lemma">exec_semprod_in_right_eq</span></a> `(<a id="semi:94" class="idref" href="#semi:94"><span class="id" title="binder">semi</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a id="i:93" class="idref" href="#i:93"><span class="id" title="binder">i</span></a>) `(<a id="semj:96" class="idref" href="#semj:96"><span class="id" title="binder">semj</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a id="j:95" class="idref" href="#j:95"><span class="id" title="binder">j</span></a>) `(<a id="e:98" class="idref" href="#e:98"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#j:95"><span class="id" title="variable">j</span></a> <a id="9df1a79c0f7913299c061d67b7934f0e" class="idref" href="#9df1a79c0f7913299c061d67b7934f0e"><span class="id" title="binder">α</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semi:94"><span class="id" title="variable">semi</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#3b9461100b009f960cb7e7d18a94f57b"><span class="id" title="notation">×</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semj:96"><span class="id" title="variable">semj</span></a>) (<a class="idref" href="FreeSpec.Core.Interface.html#in_right"><span class="id" title="constructor">in_right</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:98"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="FreeSpec.Core.Semantics.html#semprod"><span class="id" title="definition">semprod</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semi:94"><span class="id" title="variable">semi</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semj:96"><span class="id" title="variable">semj</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:98"><span class="id" title="variable">e</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">semj</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">semj</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">semj</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="semprod_Proper" class="idref" href="#semprod_Proper"><span class="id" title="instance">semprod_Proper</span></a> <a id="i:99" class="idref" href="#i:99"><span class="id" title="binder">i</span></a> <a id="j:100" class="idref" href="#j:100"><span class="id" title="binder">j</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a>) (@<a class="idref" href="FreeSpec.Core.Semantics.html#semprod"><span class="id" title="definition">semprod</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:99"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#j:100"><span class="id" title="variable">j</span></a>).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">semprod_Proper</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">semi</span> <span class="id" title="var">semi'</span> <span class="id" title="var">equi</span> <span class="id" title="var">semj</span> <span class="id" title="var">semj'</span> <span class="id" title="var">equj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">α</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#eval_semprod_in_left_eq"><span class="id" title="lemma">eval_semprod_in_left_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">equi</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#eval_semprod_in_right_eq"><span class="id" title="lemma">eval_semprod_in_right_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">equj</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#exec_semprod_in_left_eq"><span class="id" title="lemma">exec_semprod_in_left_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">semprod_Proper</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">equi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">next_eq</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#exec_semprod_in_right_eq"><span class="id" title="lemma">exec_semprod_in_right_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">semprod_Proper</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">equj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">next_eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="compliant_semantics_Proper" class="idref" href="#compliant_semantics_Proper"><span class="id" title="instance">compliant_semantics_Proper</span></a> `{<a id="H:103" class="idref" href="#H:103"><span class="id" title="binder">MayProvide</span></a> <a id="H:103" class="idref" href="#H:103"><span class="id" title="binder">ix</span></a> <a id="H:103" class="idref" href="#H:103"><span class="id" title="binder">i</span></a>} `(<a id="c:105" class="idref" href="#c:105"><span class="id" title="binder">c</span></a> : <a class="idref" href="FreeSpec.Core.Contract.html#contract"><span class="id" title="record">contract</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:102"><span class="id" title="variable">i</span></a> <a id="426e948dd4e446e6c57d7ee44a55b280" class="idref" href="#426e948dd4e446e6c57d7ee44a55b280"><span class="id" title="binder">Ω</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">Basics.impl</span></a>) (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#compliant_semantics"><span class="id" title="inductive">compliant_semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#c:105"><span class="id" title="variable">c</span></a>).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">Basics.impl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">proper</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ω <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equ</span> <span class="id" title="var">comp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">equ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">comp</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">e</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">res_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">o_callee</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> <span class="id" title="var">next_eq</span> <span class="id" title="keyword">with</span> <span class="id" title="var">a</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">proper</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">next_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">res_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">next</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab30"></a><h1 class="section">General Lemmas</h1>

<div class="paragraph"> </div>

 We provide several lemmas and the necessary <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a></span> instances to use these
    functions in conjunction with <span class="inlinecode"><span class="id" title="var">semantics_equiv</span></span> and <span class="inlinecode"><span class="id" title="var">impure_equiv</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="run_impure_equation" class="idref" href="#run_impure_equation"><span class="id" title="lemma">run_impure_equation</span></a> {<a id="i:106" class="idref" href="#i:106"><span class="id" title="binder">i</span></a> <a id="a:107" class="idref" href="#a:107"><span class="id" title="binder">a</span></a>} (<a id="sem:108" class="idref" href="#sem:108"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:106"><span class="id" title="variable">i</span></a>) (<a id="p:109" class="idref" href="#p:109"><span class="id" title="binder">p</span></a> : <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:106"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:107"><span class="id" title="variable">a</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#run_impure"><span class="id" title="definition">run_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:108"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:109"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:108"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:109"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:108"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:109"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a>, <a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="FreeSpec.Core.Semantics.html#run_impure"><span class="id" title="definition">run_impure</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="run_impure_request_then_assoc" class="idref" href="#run_impure_request_then_assoc"><span class="id" title="lemma">run_impure_request_then_assoc</span></a> {<a id="i:110" class="idref" href="#i:110"><span class="id" title="binder">i</span></a> <a id="a:111" class="idref" href="#a:111"><span class="id" title="binder">a</span></a> <a id="b:112" class="idref" href="#b:112"><span class="id" title="binder">b</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sem:113" class="idref" href="#sem:113"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:110"><span class="id" title="variable">i</span></a>) (<a id="e:114" class="idref" href="#e:114"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:110"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:111"><span class="id" title="variable">a</span></a>) (<a id="f:115" class="idref" href="#f:115"><span class="id" title="binder">f</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:111"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:110"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#b:112"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#run_impure"><span class="id" title="definition">run_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:113"><span class="id" title="variable">sem</span></a> (<a class="idref" href="FreeSpec.Core.Impure.html#request_then"><span class="id" title="constructor">request_then</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:114"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:115"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#run_impure"><span class="id" title="definition">run_impure</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:113"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:114"><span class="id" title="variable">e</span></a>) (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:115"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:113"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:114"><span class="id" title="variable">e</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.Semantics.html#run_effect_equation"><span class="id" title="lemma">run_effect_equation</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_impure_request_then_assoc" class="idref" href="#eval_impure_request_then_assoc"><span class="id" title="lemma">eval_impure_request_then_assoc</span></a> {<a id="i:116" class="idref" href="#i:116"><span class="id" title="binder">i</span></a> <a id="a:117" class="idref" href="#a:117"><span class="id" title="binder">a</span></a> <a id="b:118" class="idref" href="#b:118"><span class="id" title="binder">b</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sem:119" class="idref" href="#sem:119"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:116"><span class="id" title="variable">i</span></a>) (<a id="e:120" class="idref" href="#e:120"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:116"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:117"><span class="id" title="variable">a</span></a>) (<a id="f:121" class="idref" href="#f:121"><span class="id" title="binder">f</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:117"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:116"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#b:118"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:119"><span class="id" title="variable">sem</span></a> (<a class="idref" href="FreeSpec.Core.Impure.html#request_then"><span class="id" title="constructor">request_then</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:120"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:121"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:119"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:120"><span class="id" title="variable">e</span></a>) (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:121"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:119"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:120"><span class="id" title="variable">e</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_impure_request_then_assoc"><span class="id" title="lemma">run_impure_request_then_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="exec_impure_request_then_assoc" class="idref" href="#exec_impure_request_then_assoc"><span class="id" title="lemma">exec_impure_request_then_assoc</span></a> {<a id="i:122" class="idref" href="#i:122"><span class="id" title="binder">i</span></a> <a id="a:123" class="idref" href="#a:123"><span class="id" title="binder">a</span></a> <a id="b:124" class="idref" href="#b:124"><span class="id" title="binder">b</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sem:125" class="idref" href="#sem:125"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:122"><span class="id" title="variable">i</span></a>) (<a id="e:126" class="idref" href="#e:126"><span class="id" title="binder">e</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:122"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:123"><span class="id" title="variable">a</span></a>) (<a id="f:127" class="idref" href="#f:127"><span class="id" title="binder">f</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:123"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:122"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#b:124"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:125"><span class="id" title="variable">sem</span></a> (<a class="idref" href="FreeSpec.Core.Impure.html#request_then"><span class="id" title="constructor">request_then</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:126"><span class="id" title="variable">e</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:127"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:125"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:126"><span class="id" title="variable">e</span></a>) (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:127"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:125"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#e:126"><span class="id" title="variable">e</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_impure_request_then_assoc"><span class="id" title="lemma">run_impure_request_then_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="run_impure_bind_assoc" class="idref" href="#run_impure_bind_assoc"><span class="id" title="lemma">run_impure_bind_assoc</span></a> {<a id="i:128" class="idref" href="#i:128"><span class="id" title="binder">i</span></a> <a id="a:129" class="idref" href="#a:129"><span class="id" title="binder">a</span></a> <a id="b:130" class="idref" href="#b:130"><span class="id" title="binder">b</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sem:131" class="idref" href="#sem:131"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:128"><span class="id" title="variable">i</span></a>) (<a id="p:132" class="idref" href="#p:132"><span class="id" title="binder">p</span></a> : <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:128"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:129"><span class="id" title="variable">a</span></a>) (<a id="f:133" class="idref" href="#f:133"><span class="id" title="binder">f</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:129"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:128"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#b:130"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#run_impure"><span class="id" title="definition">run_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:131"><span class="id" title="variable">sem</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:132"><span class="id" title="variable">p</span></a> <span class="id" title="notation">&gt;&gt;=</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:133"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#run_impure"><span class="id" title="definition">run_impure</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:131"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:132"><span class="id" title="variable">p</span></a>) (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:133"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:131"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:132"><span class="id" title="variable">p</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">sem</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.ImpureFacts.html#bind_request_then_assoc"><span class="id" title="lemma">bind_request_then_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_impure_request_then_assoc"><span class="id" title="lemma">run_impure_request_then_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#exec_impure_request_then_assoc"><span class="id" title="lemma">exec_impure_request_then_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#eval_impure_request_then_assoc"><span class="id" title="lemma">eval_impure_request_then_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_impure_bind_assoc" class="idref" href="#eval_impure_bind_assoc"><span class="id" title="lemma">eval_impure_bind_assoc</span></a> {<a id="i:134" class="idref" href="#i:134"><span class="id" title="binder">i</span></a> <a id="a:135" class="idref" href="#a:135"><span class="id" title="binder">a</span></a> <a id="b:136" class="idref" href="#b:136"><span class="id" title="binder">b</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sem:137" class="idref" href="#sem:137"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:134"><span class="id" title="variable">i</span></a>) (<a id="p:138" class="idref" href="#p:138"><span class="id" title="binder">p</span></a> : <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:134"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:135"><span class="id" title="variable">a</span></a>) (<a id="f:139" class="idref" href="#f:139"><span class="id" title="binder">f</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:135"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:134"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#b:136"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:137"><span class="id" title="variable">sem</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:138"><span class="id" title="variable">p</span></a> <span class="id" title="notation">&gt;&gt;=</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:139"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:137"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:138"><span class="id" title="variable">p</span></a>) (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:139"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:137"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:138"><span class="id" title="variable">p</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_impure_bind_assoc"><span class="id" title="lemma">run_impure_bind_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="exec_impure_bind_assoc" class="idref" href="#exec_impure_bind_assoc"><span class="id" title="lemma">exec_impure_bind_assoc</span></a> {<a id="i:140" class="idref" href="#i:140"><span class="id" title="binder">i</span></a> <a id="a:141" class="idref" href="#a:141"><span class="id" title="binder">a</span></a> <a id="b:142" class="idref" href="#b:142"><span class="id" title="binder">b</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sem:143" class="idref" href="#sem:143"><span class="id" title="binder">sem</span></a> : <a class="idref" href="FreeSpec.Core.Semantics.html#semantics"><span class="id" title="inductive">semantics</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:140"><span class="id" title="variable">i</span></a>) (<a id="p:144" class="idref" href="#p:144"><span class="id" title="binder">p</span></a> : <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:140"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:141"><span class="id" title="variable">a</span></a>) (<a id="f:145" class="idref" href="#f:145"><span class="id" title="binder">f</span></a> : <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:141"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="FreeSpec.Core.Impure.html#impure"><span class="id" title="inductive">impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:140"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#b:142"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:143"><span class="id" title="variable">sem</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:144"><span class="id" title="variable">p</span></a> <span class="id" title="notation">&gt;&gt;=</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:145"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:143"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:144"><span class="id" title="variable">p</span></a>) (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#f:145"><span class="id" title="variable">f</span></a> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#sem:143"><span class="id" title="variable">sem</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#p:144"><span class="id" title="variable">p</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_impure_bind_assoc"><span class="id" title="lemma">run_impure_bind_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="run_impure_Proper_1" class="idref" href="#run_impure_Proper_1"><span class="id" title="instance">run_impure_Proper_1</span></a> (<a id="i:146" class="idref" href="#i:146"><span class="id" title="binder">i</span></a> : <a class="idref" href="FreeSpec.Core.Interface.html#interface"><span class="id" title="definition">interface</span></a>) (<a id="a:147" class="idref" href="#a:147"><span class="id" title="binder">a</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_effect_eq"><span class="id" title="definition">run_effect_eq</span></a>) (@<a class="idref" href="FreeSpec.Core.Semantics.html#run_impure"><span class="id" title="definition">run_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:146"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:147"><span class="id" title="variable">a</span></a>).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equ</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equ</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">equ</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#eval_impure_request_then_assoc"><span class="id" title="lemma">eval_impure_request_then_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_impure_request_then_assoc"><span class="id" title="lemma">run_impure_request_then_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="FreeSpec.Core.Semantics.html#eval_effect"><span class="id" title="definition">eval_effect</span></a> <span class="id" title="var">sem</span> <span class="id" title="var">e</span>) (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <span class="id" title="var">sem</span> <span class="id" title="var">e</span>) (<a class="idref" href="FreeSpec.Core.Semantics.html#exec_effect"><span class="id" title="definition">exec_effect</span></a> <span class="id" title="var">sem'</span> <span class="id" title="var">e</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">equ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">next_eq</span> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">next_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">res_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">next_eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="run_impure_Proper_2" class="idref" href="#run_impure_Proper_2"><span class="id" title="instance">run_impure_Proper_2</span></a> (<a id="i:148" class="idref" href="#i:148"><span class="id" title="binder">i</span></a> : <a class="idref" href="FreeSpec.Core.Interface.html#interface"><span class="id" title="definition">interface</span></a>) (<a id="a:149" class="idref" href="#a:149"><span class="id" title="binder">a</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.ImpureFacts.html#impure_eq"><span class="id" title="inductive">impure_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_effect_eq"><span class="id" title="definition">run_effect_eq</span></a>) (@<a class="idref" href="FreeSpec.Core.Semantics.html#run_impure"><span class="id" title="definition">run_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:148"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:149"><span class="id" title="variable">a</span></a>).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">equ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">sem</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">equ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#run_impure_request_then_assoc"><span class="id" title="lemma">run_impure_request_then_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="eval_impure_Proper" class="idref" href="#eval_impure_Proper"><span class="id" title="instance">eval_impure_Proper</span></a> (<a id="i:150" class="idref" href="#i:150"><span class="id" title="binder">i</span></a> : <a class="idref" href="FreeSpec.Core.Interface.html#interface"><span class="id" title="definition">interface</span></a>) (<a id="a:151" class="idref" href="#a:151"><span class="id" title="binder">a</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.ImpureFacts.html#impure_eq"><span class="id" title="inductive">impure_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (@<a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:150"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:151"><span class="id" title="variable">a</span></a>).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equ1</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">equ2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#eval_impure"><span class="id" title="definition">eval_impure</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">equ1</span>, <span class="id" title="var">equ2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">program</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="exec_impure_Proper" class="idref" href="#exec_impure_Proper"><span class="id" title="instance">exec_impure_Proper</span></a> (<a id="i:152" class="idref" href="#i:152"><span class="id" title="binder">i</span></a> : <a class="idref" href="FreeSpec.Core.Interface.html#interface"><span class="id" title="definition">interface</span></a>) (<a id="a:153" class="idref" href="#a:153"><span class="id" title="binder">a</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.ImpureFacts.html#impure_eq"><span class="id" title="inductive">impure_eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#semantics_eq"><span class="id" title="inductive">semantics_eq</span></a>) (@<a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#i:152"><span class="id" title="variable">i</span></a> <a class="idref" href="FreeSpec.Core.SemanticsFacts.html#a:153"><span class="id" title="variable">a</span></a>).<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">add_morphism_tactic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sem</span> <span class="id" title="var">sem'</span> <span class="id" title="var">equ1</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">equ2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="FreeSpec.Core.Semantics.html#exec_impure"><span class="id" title="definition">exec_impure</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">equ1</span>, <span class="id" title="var">equ2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>